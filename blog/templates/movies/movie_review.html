{% extends 'main.html' %}
{% block title %} Review {% endblock %}

{% block main-header %}

{% load static %}

<link href="{% static 'users/css/style.css' %}" rel="stylesheet">

<style>
    body {
        background-color: white;
    }

    .card-container {
        cursor: pointer;
    }

    .img-container {
        position: relative;
        height: 340px;
        overflow: hidden;
    }

    .img-container img {
        height: 100%;
        width: 100%;
        object-fit: cover;
        transition: 0.4s;
    }

    .card-overlay-content {
        position: absolute;
        top: -100%;
        left: -100%;
        width: 100%;
        height: 100%;
        /*background: rgba(255, 0 ,0 , .7);*/
        /*background: rgba(0, 0, 0, .6);*/
        transition: 0.4s;
    }

    .card-text-wrapper {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

    .card-container:hover .card-overlay-content {
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, .6);

    }

    .card-container:hover .img-container img {
        -ms-transform: scale(1.15);
        /* IE 9 */
        -webkit-transform: scale(1.15);
        /* Safari 3-8 */
        transform: scale(1.15);
    }
</style>

{% endblock %}

{% block body %}
<section class="review-container">
    <!--    crousel starts -->
    <div class="carousel slide" data-bs-ride="carousel" id="carouselExampleCaptions">
        <ol class="carousel-indicators">
            <li class="active" data-bs-slide-to="0" data-bs-target="#carouselExampleCaptions"></li>
            <li data-bs-slide-to="1" data-bs-target="#carouselExampleCaptions"></li>
            <li data-bs-slide-to="2" data-bs-target="#carouselExampleCaptions"></li>
        </ol>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img alt="..." class="d-block w-100"
                    src="/media/uploads/2020/10/30/87e58bde68ba4c7180673dc34f555d7d.jpeg">
                <div class="carousel-caption d-none d-md-block bg-info opacity-75">
                    <h5>First slide label</h5>
                    <p>Nulla vitae elit libero, a pharetra augue mollis interdum.</p>
                </div>
            </div>
            <div class="carousel-item">
                <img alt="..." class="d-block w-100"
                    src="/media/uploads/2020/07/31/633b1f37bb574b3cbfcafe9d2141486b.jpg">
                <div class="carousel-caption d-none d-md-block">
                    <h5>Second slide label</h5>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
                </div>
            </div>
            <div class="carousel-item">
                <img alt="..." class="d-block w-100"
                    src="/media/uploads/2020/10/30/b237fa7228ff4b4d8a53e6c730083425.jpeg">
                <div class="carousel-caption d-none d-md-block ">
                    <h5>Third slide label</h5>
                    <p>Praesent commodo cursus magna, vel scelerisque nisl consectetur.</p>
                </div>
            </div>
        </div>
        <a class="carousel-control-prev" data-slide="prev" href="#carouselExampleCaptions" role="button">
            <span aria-hidden="true" class="carousel-control-prev-icon"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" data-slide="next" href="#carouselExampleCaptions" role="button">
            <span aria-hidden="true" class="carousel-control-next-icon"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
    <!--    crousel ends-->

    <section>
        <div class="my-4 flex justify-center">
            <span class="footer-header inline relative text-xl pb-1 text-gray-800">Our Latest Reviews</span>
        </div>
        <!--    grid for movie cards starts-->
        <div class="row justify-center my-4">
            {% for movie in recent_movies %}
            
            <div class="card-container col-sm-3 shadow-lg px-0 py-0 m-2">
                <!-- container -->
                <a href="{% url 'movies:movie-review-detail' movie.id %}">
                    <div class="img-container p-0 border-0 bg-dark text-white">
                        <!-- img box -->
                        <!-- <img alt="..." class="card-img" src="/media/uploads/2020/10/30/87e58bde68ba4c7180673dc34f555d7d.jpeg"> -->
                        <img alt="..." class="card-img" src="{{ movie.poster.url }}">
                        <div class="card-overlay-content">
                            <!-- overlay content -->
                            <div class="card-text-wrapper">
                                <h5 id="movie-title" class="card-title text-white fs-1">{{ movie.title | capfirst }}</h5>

                                <span class="card-text">IMDB:</span> <span id="imdb-star" class="imdb-star">N/A</span> <br>
                                <span class="card-text">Metacritic:</span> <span id="meta-score" class= "meta-score">N/A</span>
                            </div>

                        </div>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>
    </section>
</section>

<script>
    // store imdb_id in an array 
    // for each array value, call the imdb api to fetch ratings
    var imdb_ids = [
        {% for movie in recent_movies %}
            {% if not forloop.first %}, {% endif %}

            {
                imdb_id: "{{ movie.imdb_id }}"
            }
        {% endfor %}
    ];

    // console.log("imdb ids: ");
    // console.log(imdb_ids);

</script>

<!--bootstrap scripts starts-->
<script src="{% static 'users/js/jquery.min.js' %}"></script>
<script src="{% static 'users/js/popper.js' %}"></script>
<script src="{% static 'users/js/bootstrap.min.js' %}"></script>
<script src="{% static 'users/js/main.js' %}"></script>
<!--bootstrap script ends -->

<script src="{% static 'movies/js/script.js' %}"></script>


{% endblock %}